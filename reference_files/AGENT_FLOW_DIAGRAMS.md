# Agent Flow Architecture - Process Diagrams

## ğŸ¯ Overview

This document shows the **complete agent flow** from data ingestion to final decision-making, including current state (Phase 1) and future vision (Phases 1-8).

---

## ğŸ“Š **CURRENT IMPLEMENTATION (Phase 1) - What You Have Now**

### **High-Level Flow:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CRYPTO REGIME ANALYSIS SYSTEM                 â”‚
â”‚                         (Phase 1 - MVP)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT: Symbol (e.g., "BTC-USD"), Mode (fast/thorough)
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SETUP ARTIFACTS â”‚  Create output directory
â”‚     (Node 1)     â”‚  artifacts/{symbol}/{date}/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    LOAD DATA     â”‚  Fetch OHLCV from Polygon.io
â”‚     (Node 2)     â”‚  For LT (1D), MT (4H), ST (15m)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPUTE FEATURES â”‚  Calculate for each tier:
â”‚     (Node 3)     â”‚  â€¢ Hurst (R/S + DFA)
â”‚                  â”‚  â€¢ Variance Ratio
â”‚                  â”‚  â€¢ ADF test
â”‚                  â”‚  â€¢ Vol, Skew, Kurt
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    CCM AGENT     â”‚  Cross-Asset Context:
â”‚     (Node 4)     â”‚  â€¢ Analyze coupling with ETH, SOL
â”‚                  â”‚  â€¢ Check macro influence (SPY, DXY, VIX)
â”‚                  â”‚  â€¢ Output: sector_coupling, macro_coupling
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DETECT REGIME   â”‚  **DECISION POINT 1**
â”‚     (Node 5)     â”‚  Classify market state:
â”‚                  â”‚  â€¢ trending / mean_reverting / random / volatile
â”‚                  â”‚  â€¢ Confidence score (0-1)
â”‚                  â”‚  â€¢ Uses: Hurst + VR + CCM context
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SELECT STRATEGY  â”‚  **DECISION POINT 2**
â”‚     (Node 6)     â”‚  Map regime â†’ strategy:
â”‚                  â”‚  â€¢ trending â†’ ma_cross / donchian
â”‚                  â”‚  â€¢ mean_reverting â†’ bollinger_revert
â”‚                  â”‚  â€¢ From config mappings
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    BACKTEST      â”‚  Test strategy (if mode=thorough):
â”‚     (Node 7)     â”‚  â€¢ Run walk-forward backtest
â”‚                  â”‚  â€¢ Compute 40+ metrics
â”‚                  â”‚  â€¢ Transaction costs included
â”‚     [Optional]   â”‚  
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONTRADICTOR    â”‚  **QUALITY GATE 1**
â”‚     (Node 8)     â”‚  Red-team validation:
â”‚                  â”‚  â€¢ Re-run with alternate timeframe
â”‚                  â”‚  â€¢ Find contradictions
â”‚                  â”‚  â€¢ Adjust confidence DOWN if issues
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      JUDGE       â”‚  **QUALITY GATE 2**
â”‚     (Node 9)     â”‚  Schema validation:
â”‚                  â”‚  â€¢ Check for NaNs
â”‚                  â”‚  â€¢ Validate bounds
â”‚                  â”‚  â€¢ Ensure data quality
â”‚                  â”‚  â€¢ Mark valid=True/False
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SUMMARIZER     â”‚  **FINAL DECISION**
â”‚    (Node 10)     â”‚  Fusion & recommendation:
â”‚                  â”‚  â€¢ Combine LT/MT/ST signals
â”‚                  â”‚  â€¢ Apply contradictor adjustments
â”‚                  â”‚  â€¢ Generate executive summary
â”‚                  â”‚  â€¢ Output: ST recommendation + confidence
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
OUTPUT: 
â€¢ report.md (comprehensive markdown)
â€¢ report.pdf (optional, professional)
â€¢ JSON artifacts (all intermediate data)
â€¢ Backtest plots & trade logs
```

---

## ğŸ” **DETAILED DECISION-MAKING FLOW (End of Pipeline)**

### **How Agents Interact to Make Final Decision:**

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           MULTI-TIER REGIME FUSION & DECISION LOGIC            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INPUTS FROM PREVIOUS NODES:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Regime LT â”‚  â”‚  Regime MT â”‚  â”‚  Regime ST â”‚
â”‚ trending   â”‚  â”‚ trending   â”‚  â”‚ trending   â”‚
â”‚ conf: 80%  â”‚  â”‚ conf: 70%  â”‚  â”‚ conf: 75%  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚               â”‚               â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  CCM CONTEXT   â”‚
              â”‚  sector: 0.72  â”‚
              â”‚  macro: 0.18   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘   CONTRADICTOR AGENT      â•‘
         â•‘   (Red-Team Validation)   â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                       â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                â”‚                â”‚
      â–¼                â–¼                â–¼
Re-run with      Check for       Test edge
alternate bar    contradictions   cases
(1h instead      in signals       
of 15m)          
      â”‚                â”‚                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ CONTRADICTIONS â”‚
              â”‚   FOUND?       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                       â”‚
          YES                     NO
           â”‚                       â”‚
           â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ADJUST DOWN  â”‚      â”‚  KEEP HIGH   â”‚
    â”‚ Conf: 75% â†’ â”‚      â”‚ Confidence   â”‚
    â”‚      50%     â”‚      â”‚  75%         â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘      JUDGE AGENT          â•‘
         â•‘   (Quality Validation)    â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                      â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚               â”‚               â”‚
      â–¼               â–¼               â–¼
 Check schema    Check NaNs     Check bounds
 (Pydantic)      in data        (0 â‰¤ conf â‰¤ 1)
      â”‚               â”‚               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ALL VALID?    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                       â”‚
          YES                     NO
           â”‚                       â”‚
           â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PROCEED TO  â”‚      â”‚ LOG ERRORS & â”‚
    â”‚  SUMMARIZER  â”‚      â”‚   WARNING    â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘    SUMMARIZER AGENT       â•‘
         â•‘  (Fusion & Final Output)  â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                      â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚               â”‚               â”‚
      â–¼               â–¼               â–¼
  Check         Apply fusion     Generate
  alignment     rules            rationale
  LT/MT/ST      
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ FUSION LOGIC:  â”‚
        â”‚                â”‚
        â”‚ IF all tiers   â”‚
        â”‚ agree:         â”‚
        â”‚   âœ… High      â”‚
        â”‚   conviction   â”‚
        â”‚                â”‚
        â”‚ IF ST/MT agree,â”‚
        â”‚ LT differs:    â”‚
        â”‚   âš ï¸ Tactical  â”‚
        â”‚   bias         â”‚
        â”‚                â”‚
        â”‚ IF all differ: â”‚
        â”‚   âš ï¸ Mixed     â”‚
        â”‚   signals      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ FINAL OUTPUT:  â”‚
        â”‚                â”‚
        â”‚ â€¢ ST Regime    â”‚
        â”‚ â€¢ ST Strategy  â”‚
        â”‚ â€¢ Confidence   â”‚
        â”‚   (adjusted)   â”‚
        â”‚ â€¢ Rationale    â”‚
        â”‚ â€¢ Risk level   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ **FUTURE VISION (Phases 1-8) - Complete System**

### **Full Multi-Agent Architecture:**

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              COMPLETE CRYPTO INTELLIGENCE SYSTEM                  â•‘
â•‘                    (All Phases Implemented)                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA INGESTION LAYER                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Polygon.io (OHLCV)         [Phase 1] âœ…                      â”‚
â”‚  â€¢ L2 Order Book Data         [Phase 2] ğŸ”œ                      â”‚
â”‚  â€¢ On-chain Metrics           [Phase 4] ğŸ”œ                      â”‚
â”‚  â€¢ Social Sentiment (Twitter) [Phase 4] ğŸ”œ                      â”‚
â”‚  â€¢ News Feeds (FinBERT)       [Phase 4] ğŸ”œ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FEATURE ENGINEERING LAYER                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Statistical  â”‚  â”‚ Microstructureâ”‚  â”‚  Sentiment   â”‚         â”‚
â”‚  â”‚   Features   â”‚  â”‚   Features    â”‚  â”‚   Features   â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚â€¢ Hurst [P1]  â”‚  â”‚â€¢ OFI [P2] ğŸ”œ â”‚  â”‚â€¢ FinBERT[P4]â”‚         â”‚
â”‚  â”‚â€¢ VR    [P1]  â”‚  â”‚â€¢ Book [P2] ğŸ”œâ”‚  â”‚â€¢ Social [P4]â”‚         â”‚
â”‚  â”‚â€¢ ADF   [P1]  â”‚  â”‚â€¢ Tick [P2] ğŸ”œâ”‚  â”‚â€¢ News  [P4] â”‚         â”‚
â”‚  â”‚â€¢ Vol   [P1]  â”‚  â”‚              â”‚  â”‚             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REGIME DETECTION LAYER                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ LT Regime    â”‚  â”‚ MT Regime    â”‚  â”‚ ST Regime    â”‚         â”‚
â”‚  â”‚ (Macro)      â”‚  â”‚ (Swing)      â”‚  â”‚ (Execution)  â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ 1D / 730 daysâ”‚  â”‚ 4H / 120 daysâ”‚  â”‚ 15m / 30 daysâ”‚         â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚         â”‚
â”‚  â”‚ + US Regime  â”‚â—„â”€â”¼â”€ COHERENCE â”€â”¼â”€â–ºâ”‚ + Micro [P2] â”‚         â”‚
â”‚  â”‚   (1m/5m)    â”‚  â”‚   CHECKS     â”‚  â”‚   signals    â”‚         â”‚
â”‚  â”‚   [Phase 2]  â”‚  â”‚              â”‚  â”‚              â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CROSS-ASSET CONTEXT LAYER (CCM)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  BTC â—„â”€â”€â”€â”€ Nonlinear Coupling Analysis â”€â”€â”€â”€â–º ETH  â”‚         â”‚
â”‚  â”‚   â”‚                                           â”‚    â”‚         â”‚
â”‚  â”‚   â””â”€â”€â–º SOL                         SPY â—„â”€â”€â”€â”€â”€â”˜    â”‚         â”‚
â”‚  â”‚          â”‚                           â”‚             â”‚         â”‚
â”‚  â”‚          â””â”€â”€â–º DXY â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚         â”‚
â”‚  â”‚                â”‚                                    â”‚         â”‚
â”‚  â”‚                â””â”€â”€â–º VIX                             â”‚         â”‚
â”‚  â”‚                                                     â”‚         â”‚
â”‚  â”‚  Output:                             [Phase 3] ğŸ”œ  â”‚         â”‚
â”‚  â”‚  â€¢ Correlation Regimes                             â”‚         â”‚
â”‚  â”‚  â€¢ Risk-On / Risk-Off signals                      â”‚         â”‚
â”‚  â”‚  â€¢ Decoupling alerts                               â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STRATEGY & EXECUTION LAYER                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Strategy    â”‚  â”‚  Backtest    â”‚  â”‚  Execution   â”‚         â”‚
â”‚  â”‚  Selection   â”‚  â”‚  Engine      â”‚  â”‚  Manager     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ Map regime   â”‚  â”‚ 40+ metrics  â”‚  â”‚ CCXT [P5] ğŸ”œâ”‚         â”‚
â”‚  â”‚ to strategy  â”‚  â”‚ Walk-forward â”‚  â”‚ Live trading â”‚         â”‚
â”‚  â”‚ [Phase 1] âœ… â”‚  â”‚ [Phase 1] âœ… â”‚  â”‚ Paper mode   â”‚         â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ Risk limits  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PORTFOLIO INTELLIGENCE LAYER [Phase 7]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Portfolio Regime Agent                            â”‚         â”‚
â”‚  â”‚  â€¢ Aggregate multiple asset regimes                â”‚         â”‚
â”‚  â”‚  â€¢ Detect portfolio-level patterns                 â”‚         â”‚
â”‚  â”‚  â€¢ Cross-asset optimization                        â”‚         â”‚
â”‚  â”‚                                                     â”‚         â”‚
â”‚  â”‚  Optimizer Agent                                   â”‚         â”‚
â”‚  â”‚  â€¢ Mean-variance optimization                      â”‚         â”‚
â”‚  â”‚  â€¢ Risk parity allocation                          â”‚         â”‚
â”‚  â”‚  â€¢ Rebalancing recommendations                     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   QUALITY & VALIDATION LAYER                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚Contradictor  â”‚  â”‚    Judge     â”‚  â”‚   Monitor    â”‚         â”‚
â”‚  â”‚    Agent     â”‚  â”‚    Agent     â”‚  â”‚    Agent     â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚â€¢ Red-team    â”‚  â”‚â€¢ Schema val. â”‚  â”‚â€¢ Performance â”‚         â”‚
â”‚  â”‚â€¢ Alt methods â”‚  â”‚â€¢ Data qualityâ”‚  â”‚â€¢ Drift detectâ”‚         â”‚
â”‚  â”‚â€¢ Edge cases  â”‚  â”‚â€¢ Bounds checkâ”‚  â”‚â€¢ Alerts [P6] â”‚         â”‚
â”‚  â”‚[Phase 1] âœ…  â”‚  â”‚[Phase 1] âœ…  â”‚  â”‚      ğŸ”œ      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                 â”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DECISION FUSION ENGINE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚              SUMMARIZER AGENT                      â”‚         â”‚
â”‚  â”‚         (Multi-Source Fusion)                      â”‚         â”‚
â”‚  â”‚                                                     â”‚         â”‚
â”‚  â”‚  Inputs:                                           â”‚         â”‚
â”‚  â”‚  âœ“ Multi-tier regimes (LT/MT/ST/US)              â”‚         â”‚
â”‚  â”‚  âœ“ Cross-asset context                            â”‚         â”‚
â”‚  â”‚  âœ“ Sentiment scores (Phase 4)                     â”‚         â”‚
â”‚  â”‚  âœ“ Microstructure signals (Phase 2)               â”‚         â”‚
â”‚  â”‚  âœ“ Portfolio constraints (Phase 7)                â”‚         â”‚
â”‚  â”‚  âœ“ Risk limits (Phase 5)                          â”‚         â”‚
â”‚  â”‚  âœ“ Contradictor adjustments                       â”‚         â”‚
â”‚  â”‚  âœ“ Judge validation                               â”‚         â”‚
â”‚  â”‚                                                     â”‚         â”‚
â”‚  â”‚  Fusion Rules:                                     â”‚         â”‚
â”‚  â”‚  1. Weight by confidence                           â”‚         â”‚
â”‚  â”‚  2. Check coherence across timeframes              â”‚         â”‚
â”‚  â”‚  3. Apply sentiment overlay                        â”‚         â”‚
â”‚  â”‚  4. Validate against portfolio constraints         â”‚         â”‚
â”‚  â”‚  5. Generate final recommendation                  â”‚         â”‚
â”‚  â”‚                                                     â”‚         â”‚
â”‚  â”‚  Outputs:                                          â”‚         â”‚
â”‚  â”‚  â€¢ Final regime classification                     â”‚         â”‚
â”‚  â”‚  â€¢ Strategy recommendation                         â”‚         â”‚
â”‚  â”‚  â€¢ Position sizing                                 â”‚         â”‚
â”‚  â”‚  â€¢ Risk level assessment                           â”‚         â”‚
â”‚  â”‚  â€¢ Confidence score (multi-source)                â”‚         â”‚
â”‚  â”‚  â€¢ Rationale & warnings                            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       OUTPUT & INTERFACE LAYER                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚     CLI      â”‚  â”‚  Telegram    â”‚  â”‚  PWA [P6] ğŸ”œâ”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚â€¢ Commands    â”‚  â”‚â€¢ Bot         â”‚  â”‚â€¢ Dashboard   â”‚         â”‚
â”‚  â”‚â€¢ Reports     â”‚  â”‚â€¢ Alerts      â”‚  â”‚â€¢ Real-time   â”‚         â”‚
â”‚  â”‚[Phase 1] âœ…  â”‚  â”‚[Phase 1] âœ…  â”‚  â”‚â€¢ Mobile      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚         REPORT GENERATION                          â”‚         â”‚
â”‚  â”‚  â€¢ Markdown (LLM-ready)           [Phase 1] âœ…    â”‚         â”‚
â”‚  â”‚  â€¢ PDF (Professional)             [Phase 1] âœ…    â”‚         â”‚
â”‚  â”‚  â€¢ JSON (Structured data)         [Phase 1] âœ…    â”‚         â”‚
â”‚  â”‚  â€¢ Interactive charts (Phase 6)            ğŸ”œ     â”‚         â”‚
â”‚  â”‚  â€¢ Real-time dashboard (Phase 6)           ğŸ”œ     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **DECISION-MAKING HIERARCHY**

### **How Final Decisions are Made (Multi-Level):**

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              DECISION-MAKING HIERARCHY                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LEVEL 1: DATA VALIDATION
â”œâ”€ Input: Raw market data
â”œâ”€ Check: Completeness, quality, timestamps
â”œâ”€ Agent: Judge Agent (initial validation)
â””â”€ Decision: PROCEED / REJECT

LEVEL 2: STATISTICAL EVIDENCE
â”œâ”€ Input: Feature bundles (LT/MT/ST)
â”œâ”€ Check: Hurst, VR, ADF significance
â”œâ”€ Agent: Feature computation (deterministic)
â””â”€ Decision: REGIME SIGNAL (per tier)

LEVEL 3: CROSS-ASSET CONTEXT
â”œâ”€ Input: CCM coupling analysis
â”œâ”€ Check: Sector vs macro influence
â”œâ”€ Agent: CCM Agent
â””â”€ Decision: REGIME MODIFIER (boost/reduce confidence)

LEVEL 4: REGIME CLASSIFICATION
â”œâ”€ Input: Features + CCM context
â”œâ”€ Check: Multiple indicators alignment
â”œâ”€ Agent: Regime detection logic
â””â”€ Decision: REGIME LABEL + BASE CONFIDENCE

LEVEL 5: STRATEGY MAPPING
â”œâ”€ Input: Regime label
â”œâ”€ Check: Config-driven mappings
â”œâ”€ Agent: Strategy selection
â””â”€ Decision: STRATEGY RECOMMENDATION

LEVEL 6: PERFORMANCE VALIDATION
â”œâ”€ Input: Strategy + historical data
â”œâ”€ Check: 40+ backtest metrics
â”œâ”€ Agent: Backtest engine
â””â”€ Decision: PERFORMANCE PROFILE

LEVEL 7: RED-TEAM VALIDATION
â”œâ”€ Input: All previous outputs
â”œâ”€ Check: Alternate methods, edge cases
â”œâ”€ Agent: Contradictor Agent
â””â”€ Decision: CONFIDENCE ADJUSTMENT (down if issues)

LEVEL 8: QUALITY GATE
â”œâ”€ Input: All agent outputs
â”œâ”€ Check: Schema, NaNs, bounds
â”œâ”€ Agent: Judge Agent (final validation)
â””â”€ Decision: VALID / INVALID

LEVEL 9: MULTI-TIER FUSION
â”œâ”€ Input: LT + MT + ST regimes
â”œâ”€ Check: Coherence across timeframes
â”œâ”€ Agent: Summarizer (fusion logic)
â””â”€ Decision: ALIGNED / TACTICAL / MIXED

LEVEL 10: FINAL RECOMMENDATION
â”œâ”€ Input: Fused regime + all validations
â”œâ”€ Check: Risk tolerance, constraints
â”œâ”€ Agent: Summarizer (executive decision)
â””â”€ Output: 
    â”œâ”€ Primary: ST regime + strategy
    â”œâ”€ Confidence: Adjusted by all validations
    â”œâ”€ Risk Level: Based on metrics
    â”œâ”€ Rationale: Full explanation
    â””â”€ Warnings: Any red flags

FUTURE (Phase 5+): EXECUTION DECISION
â”œâ”€ Input: Final recommendation
â”œâ”€ Check: Risk limits, portfolio constraints
â”œâ”€ Agent: Execution Manager
â””â”€ Decision: EXECUTE / DEFER / ALERT HUMAN
```

---

## ğŸ“‹ **AGENT INTERACTION MATRIX**

### **Current Implementation (Phase 1):**

| Agent | Reads From | Writes To | Validates | Decision Power |
|-------|------------|-----------|-----------|----------------|
| **Setup** | User input | State | N/A | Creates output dir |
| **Data Loader** | Polygon API | State (data_*) | Timestamps | Fetches data |
| **Feature** | data_* | State (features_*) | N/A | Computes stats |
| **CCM** | data_*, context_symbols | State (ccm_*) | N/A | Analyzes coupling |
| **Regime** | features_*, ccm_* | State (regime_*) | Thresholds | **Classifies regime** |
| **Strategy** | regime_* | State (strategy_*) | Config | **Selects strategy** |
| **Backtest** | strategy_*, data_* | State (backtest_*) | Min trades | Validates performance |
| **Contradictor** | regime_*, features_* | State (contradictor_*) | Alt methods | **Adjusts confidence** |
| **Judge** | All outputs | State (judge_report) | Schema/bounds | **Validates quality** |
| **Summarizer** | All state | State (exec_report) | Coherence | **Final decision** |

### **Future (All Phases):**

| Agent | Phase | Adds |
|-------|-------|------|
| **Microstructure** | 2 | OFI, book pressure signals |
| **Sentiment** | 4 | FinBERT, social sentiment overlay |
| **Portfolio** | 7 | Cross-asset optimization |
| **Execution** | 5 | Live trading decisions |
| **Monitor** | 6 | Real-time drift detection |
| **Client Config** | 9 | Multi-tenant automation |

---

## ğŸ“ **FOR YOUR PRESENTATION**

### **Key Points to Emphasize:**

1. **Multi-Level Validation:**
   - "Decisions don't come from one agent"
   - "Red-team validation (Contradictor)"
   - "Quality gates (Judge)"
   - "Multi-tier fusion (Summarizer)"

2. **Confidence Scoring:**
   - "Base confidence from statistical evidence"
   - "Adjusted by CCM context"
   - "Reduced by contradictor if fragile"
   - "Final output includes uncertainty"

3. **Explainability:**
   - "Every decision has a rationale"
   - "Full audit trail in JSON"
   - "Human-readable reports"

4. **Scalability:**
   - "Current: 10 agents, 3 tiers"
   - "Future: Portfolio, execution, sentiment overlay"
   - "Modular design = easy to add agents"

---

## âœ… **SUMMARY**

**Current State (Phase 1):**
- âœ… 10-node pipeline
- âœ… Multi-tier regime detection
- âœ… Red-team validation
- âœ… Quality gates
- âœ… Comprehensive reporting

**Future Vision (Phases 1-8):**
- ğŸ”œ Microstructure signals
- ğŸ”œ Sentiment overlay
- ğŸ”œ Portfolio optimization
- ğŸ”œ Live execution
- ğŸ”œ Real-time monitoring
- ğŸ”œ PWA dashboard

**Decision Flow:**
- Statistical evidence â†’ Regime â†’ Strategy
- Validation â†’ Adjustment â†’ Final decision
- Multi-level, multi-agent consensus
- Full explainability and audit trail

---

**Your system is architected for production-scale intelligence!** ğŸš€

